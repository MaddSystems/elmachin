<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atención GPScontrol</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- added google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="icon" href="{{ url_for('static', filename='machín/machin-cabeza-favicon.png') }}" type="image/png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.5/purify.min.js"></script>
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script> 

  </head>
  <body>
    <!-- adde "id=content" -->
    <div id="content">
      <!-- added "id=video-wrapper" -->
      <div id="video-wrapper">
        <div>
          <video id="talk-video" height="250" width="250" autoplay muted loop>
            <source src="{{ url_for('static', filename='machín/machín_demo.mp4') }}" type="video/mp4">
          </video>
        </div>
      </div>

  <!-- <button onclick="toggleShapeAndVideo()">Change Video & Shape</button> -->
    <div class="chat-container">
        <!-- <div class="chat-header"> -->
            <!-- <div class="chat-actions"> -->
              <!-- "El Machín" de GPScontrol®  <div>::</div> -->
            <!-- </div> -->
        <!-- </div> -->
        <div class="chat-header">
          <div class="chat-actions">
              "El Machín" de GPScontrol®
              <div class="thinking-dots">
                  <span></span><span></span><span></span>
              </div>
          </div>
      </div>         
        <div class="chat-messages" id="chat-messages">
            <!-- Los mensajes se agregarán dinámicamente aquí -->
        </div>

        <div class="quick-responses" id="quick-responses">
          <div class="title-responses">Selecciona una respuesta rápida:</div>
          <!-- Respuestas rápidas aparecerán aquí -->
        </div>
        
        <div class="chat-input">
          <input type="text" id="user-input" placeholder="Escribe tu mensaje..." 
            autocomplete="off"
            onkeydown="if (event.key === 'Enter' && !event.shiftKey) { event.preventDefault(); sendMessage(); }">

          <button onclick="sendMessage('user')" class="btn-enviar">
            <img src="{{ url_for('static', filename='enviar-mensaje_2.svg') }}" alt="Flecha" class="icono-svg">
          </button>

          <div class="chat-voice-action">
            <button id="mic-button" class="mic-button" title="Grabar mensaje de voz">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"></path>
                <line x1="12" x2="12" y1="19" y2="22"></line>
              </svg>
            </button>
          </div>
      </div>
    </div>

    <div>
      <!-- validaciones -->
      <input id="who-is-the-client" type="text" hidden>
      <input id="chat-id" type="text" hidden>
      <input id="chat-state" type="text" hidden>
      <input id="client-phone" type="text" hidden>
      <input id="client-email" type="text" hidden>
      <input id="who-is-connected" type="text" hidden>
      <input id="what-happen-with-the-client" type="text" hidden>
      <input id="vehicles-types" type="text" hidden>
      <input id="where-is-the-client" type="text" hidden>
      <input id="the-client-know-the-services" type="text" hidden>
      <input id="the-client-user-is" type="text" hidden>
    </div>

    <div>
      <!-- validaciones de proceso-->
      <input id="what-is-the-process" type="text" hidden>
      <input id="how-many-stapes" type="text" hidden>
      <input id="what-is-the-stape" type="text" hidden>
    </div>
</div>
    
<!-- <div class="chatbot-container" id="chatbotContainer"> -->
  <!-- <div class="close-widget" onclick="closeWidget(event)">×</div> -->
  <!-- <div class="chatbot-label">En línea</div> -->
  <!-- <div class="chatbot-widget" onclick="openChat()"> -->
      <!-- <img src="{{ url_for('static', filename='machín/machin-head-favicon.jpg') }}" alt="Chatbot"> -->
  <!-- </div> -->
<!-- </div> -->

  <script src="{{ url_for('static', filename='js/script.js') }}"></script>

  <script>
    function openChat() {
        window.open('https://elmachin.armaddia.lat/', '_blank', 'width=600,height=700');
        
    }

    function closeWidget(event) {
        event.stopPropagation();
        document.getElementById('chatbotContainer').style.display = 'none';
    }
</script>

</body>
</html>